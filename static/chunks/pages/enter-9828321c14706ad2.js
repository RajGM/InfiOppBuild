(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[926],{1296:function(e,t,n){var i=0/0,s=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,u=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,f=c||l||Function("return this")(),d=Object.prototype.toString,m=Math.max,h=Math.min,p=function(){return f.Date.now()};function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||(n=t)&&"object"==typeof n&&"[object Symbol]"==d.call(t))return i;if(x(e)){var t,n,c="function"==typeof e.valueOf?e.valueOf():e;e=x(c)?c+"":c}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var l=o.test(e);return l||a.test(e)?u(e.slice(2),l?2:8):r.test(e)?i:+e}e.exports=function(e,t,n){var i,s,r,o,a,u,c=0,l=!1,f=!1,d=!0;if("function"!=typeof e)throw TypeError("Expected a function");function j(t){var n=i,r=s;return i=s=void 0,c=t,o=e.apply(r,n)}function b(e){var n=e-u,i=e-c;return void 0===u||n>=t||n<0||f&&i>=r}function v(){var e,n,i,s=p();if(b(s))return y(s);a=setTimeout(v,(e=s-u,n=s-c,i=t-e,f?h(i,r-n):i))}function y(e){return(a=void 0,d&&i)?j(e):(i=s=void 0,o)}function _(){var e,n=p(),r=b(n);if(i=arguments,s=this,u=n,r){if(void 0===a)return c=e=u,a=setTimeout(v,t),l?j(e):o;if(f)return a=setTimeout(v,t),j(u)}return void 0===a&&(a=setTimeout(v,t)),o}return t=g(t)||0,x(n)&&(l=!!n.leading,r=(f="maxWait"in n)?m(g(n.maxWait)||0,t):r,d="trailing"in n?!!n.trailing:d),_.cancel=function(){void 0!==a&&clearTimeout(a),c=0,i=u=s=a=void 0},_.flush=function(){return void 0===a?o:y(p())},_}},8523:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/enter",function(){return n(297)}])},9270:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(5893);function s(e){let{show:t}=e;return t?(0,i.jsx)("div",{className:"loader"}):null}},297:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var i=n(5893),s=n(3963),r=n(8059),o=n(7294),a=n(1296),u=n.n(a),c=n(9270),l=n(1664),f=n.n(l);function d(e){let{user:t,username:n}=(0,o.useContext)(r.S);return(0,i.jsx)("main",{className:"middle fullHeight",children:(0,i.jsx)("div",{children:t?n?(0,i.jsx)(h,{}):(0,i.jsx)(p,{}):(0,i.jsx)(m,{})})})}function m(){let e=async()=>{await s.I8.signInWithPopup(s.qV)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("button",{className:"btn-google signinButton",onClick:e,children:[(0,i.jsx)("img",{src:"/google.png",width:"30px"})," Sign in with Google"]})})}function h(){return(0,i.jsx)(f(),{href:"/",children:(0,i.jsx)("button",{className:"btn-logo",children:"HomePage"})})}function p(){let[e,t]=(0,o.useState)(""),[n,a]=(0,o.useState)(!1),[l,f]=(0,o.useState)(!1),{user:d,username:m}=(0,o.useContext)(r.S),h=async t=>{t.preventDefault();let n=s.RZ.doc("users/".concat(d.uid)),i=s.RZ.doc("usernames/".concat(e)),r=s.RZ.batch();r.set(n,{username:e,photoURL:d.photoURL,displayName:d.displayName}),r.set(i,{uid:d.uid}),await r.commit()},p=e=>{let n=e.target.value.toLowerCase();n.length<3&&(t(n),f(!1),a(!1)),/^(?=[a-zA-Z0-9._]{3,15}$)(?!.*[_.]{2})[^_.].*[^_.]$/.test(n)&&(t(n),f(!0),a(!1))};(0,o.useEffect)(()=>{g(e)},[e]);let g=(0,o.useCallback)(u()(async e=>{if(e.length>=3){let t=s.RZ.doc("usernames/".concat(e)),{exists:n}=await t.get();console.log("Firestore read executed!"),a(!n),f(!1)}},500),[]);return!m&&(0,i.jsxs)("section",{children:[(0,i.jsx)("h3",{style:{textAlign:"center"},children:"Choose Username"}),(0,i.jsxs)("form",{onSubmit:h,children:[(0,i.jsx)("input",{name:"username",placeholder:"username",value:e,onChange:p}),(0,i.jsx)(x,{username:e,isValid:n,loading:l}),(0,i.jsx)("button",{type:"submit",className:"btn-green",disabled:!n,children:"Choose"}),(0,i.jsxs)("div",{children:["Username: ",e,(0,i.jsx)("br",{}),"Checking: ",l?(0,i.jsx)(c.Z,{show:!0,className:"middle"}):"Complete",(0,i.jsx)("br",{}),"Username Valid: ",n?"✅":"❌"]})]})]})}function x(e){let{username:t,isValid:n,loading:s}=e;return s?(0,i.jsx)("p",{children:"Checking..."}):n?(0,i.jsxs)("p",{className:"text-success",children:[t," is available!"]}):t&&!n?(0,i.jsx)("p",{className:"text-danger",children:"That username is taken!"}):(0,i.jsx)("p",{})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8523)}),_N_E=e.O()}]);